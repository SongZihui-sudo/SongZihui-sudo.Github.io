# 《谷歌代码风格指南》的一些个人的总结  

最近在Github上向他人的项目提交了几次代码，但由于我代码风格的缘故也对我与作者都造成了一些麻烦。所以又看了谷歌代码风格指南，改善自己代码风格混乱不一致的情况。  

## C/C++的头文件  
1. 头文件要自给自足，不要在依赖其第三方头文件。  
> 不过有一个例外，即一个文件并不是 self-contained 的，而是作为文本插入到代码某处。或者，文件内容实际上是其它头文件的特定平台（platform-specific）扩展部分。这些文件就要用 .inc 文件扩展名。

2. 要有`#define`，防止被多次包含。  
3. 尽量避免类，函数，模板的前置声明。   
4. 内联函数  
尽量避免写过长内联函数。  
> 只有当函数只有 10 行甚至更少时才将其定义为内联函数.  

5. `#include`的顺序
```
C 库
C++ 库,
其他库的 .h
本项目内的 .h
```
## 作用域
1. 命名空间   
尽量不使用`using namespace std`  
尽量避免内联。  
> 鼓励在 .cc 文件内使用匿名命名空间或 static 声明. 使用具名的命名空间时, 其名称可基于项目名或相对路径. 禁止使用 using 指示（using-directive）。禁止使用内联命名空间（inline namespace）。  

2. 局部变量  
在使用时定义并初始化。  
3. 静态和全局变量  
尽量少的使用使用全局变量。多封装函数，避免使用过多的全局变量。
## 类
1. 构造函数  
在构造函数中执行各种初始化的操作。  
2. 隐式类型转换
不要定义隐式类型转换. 对于转换运算符和单参数构造函数, 请使用 `explicit` 关键字。
3. 结构体  
仅当只有数据成员时使用 `struct`, 其它一概使用 `class`。
4. 运算符重载  
除少数特定环境外, 不要重载运算符. 也不要创建用户定义字面量.
5.声明顺序   
将相似的声明放在一起, 将 `public` 部分放在最前.
## 函数
1. 输入和输出  
应该避免返回指针。  
2. 编写简短函数
函数必要过长，必要时进行分割，编写简短，凝练的函数。  
3. 函数重载  
若要使用函数重载, 则必须能让读者一看调用点就胸有成竹, 而不用花心思猜测调用的重载函数到底是哪一种. 这一规则也适用于构造函数.  `
> 如果打算重载一个函数, 可以试试改在函数名里加上参数信息. 例如, 用 AppendString() 和 AppendInt() 等, 而不是一口气重载多个 Append()
## 格式
1. 函数声明与定义  
返回类型和函数名在同一行, 参数也尽量放在同一行, 如果放不下就对形参分行, 分行方式与 函数调用 一致.
2. 条件语句  
if后一个空格  
布尔表达式`= ，<,>,!=，&&，||`两边使用一个空格分割。
3. 循环和开关选择语句   
`switch` 语句可以使用大括号分段, 以表明 `cases` 之间不是连在一起的. 在单语句循环里, 括号可用可不用. 空循环体应使用 {} 或 `continue`.
4. 函数返回值
不要在 `return` 表达式里加上非必须的圆括号.  
5. 类格式
访问控制块的声明依次序是 `public:`, `protected:`, `private:`, 每个都缩进 1 个空格.
6. 水平留白   
水平留白的使用根据在代码中的位置决定. 永远不要在行尾添加没意义的留白.   
7. 垂直留白  
这不仅仅是规则而是原则问题了: 不在万不得已, 不要使用空行. 尤其是: 两个函数定义之间的空行不要超过 2 行, 函数体首尾不要留空行, 函数体中也不要随意添加空行.  
基本原则是: 同一屏可以显示的代码越多, 越容易理解程序的控制流. 当然, 过于密集的代码块和过于疏松的代码块同样难看, 这取决于你的判断. 但通常是垂直留白越少越好.  
## 其他
尽量使用智能指针。
> 动态分配出的对象最好有单一且固定的所有主, 并通过智能指针传递所有权.   
引用
[Google 开源项目风格指南——中文版](https://zh-google-styleguide.readthedocs.io/en/latest/)
